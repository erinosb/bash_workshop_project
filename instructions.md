# Instructions for the bash small group final project

### Instructions

Scenario: Your lab is interested PHO-4 which is a transcription factor in the bHLH transcription factor family. Recently, your lab has branched out to study all the bHLH transcription factors. There are 8 of them. Eventually, your lab will further expand to study all transcription factors in many different related transcription factor families. A new postdoc has been hired who will work on the bZIP transcription factors in three different organisms, for example. And another person is interested in GATA transcription factors. This could go on and on.

When you were just studying PHO-4, you used to go to [SGD](http://www.yeastgenome.org/locus/S000001930/overview#sequence) and download a fasta file containing PHO4's Coding Sequence directly from the site by pushing a button. 

```
pho4.fa (or pho4.fsa) file looks like:

>PHO4 YFR034C SGDID:S000001930
ATGGGCCGTACAACTTCTGAGGGAATACACGGTTTTGTGGACGATCTAGAGCCCAAGAGC
AGCATTCTTGATAAAGTCGGAGACTTTATCACCGTAAACACGAAACGGCATGATGGGCGC
GAGGACTTCAACGAGCAAAACGACGAGCTGAACAGTCAAGAGAACCACAACAGCAGTGAG
AATGGGAACGAGAATGAAAATGAACAAGACAGTCTCGCGTTGGACGACCTAGACCGCGCC
TTTGAGCTGGTGGAAGGTATGGATATGGACTGGATGATGCCCTCGCATGCGCACCACTCC
CCAGCTACAACTGCTACAATCAAGCCGCGGCTATTATATTCGCCGCTAATACACACGCAA
AGTGCGGTTCCCGTAACCATTTCGCCGAACTTGGTCGCTACTGCTACTTCCACCACATCC
GCTAACAAAGTCACTAAAAACAAGAGTAATAGTAGTCCGTATTTGAACAAGCGCAGAGGT
AAACCCGGGCCGGATTCGGCCACTTCGCTGTTCGAATTGCCCGACAGCGTTATCCCAACT
CCGAAACCGAAACCGAAACCAAAGCAATATCCGAAAGTTATTCTGCCGTCGAACAGCACA
AGACGCGTATCACCGGTCACGGCCAAGACCAGCAGCAGCGCAGAAGGCGTGGTCGTAGCA
AGTGAGTCTCCTGTAATCGCGCCGCACGGATCGAGCCATTCGCGGTCGCTGAGTAAGCGA
CGGTCATCGGGCGCGCTCGTGGACGATGACAAGCGCGAATCACACAAGCATGCAGAGCAA
GCACGGCGTAATCGATTAGCGGTCGCGCTGCACGAACTGGCGTCTTTAATCCCCGCGGAG
TGGAAACAGCAAAATGTGTCGGCCGCGCCGTCCAAAGCGACCACCGTGGAGGCGGCCTGC
CGGTACATCCGTCACCTACAGCAGAACGTGAGCACGTGA
```

Later, when you expanded to studying the 8 bHLH transcription factors, you could still copy and paste the fasta files together. These could include multiple genes in the same .fa file:

```
bHLH_yeast_family.fa would contain 8 gene sequences like so...

>PHO4 YFR034C SGDID:S000001930
ATGGGCCGTACAACTTCTGAGGGAATACACGGTTTTGTGGACGATCTAGAGCCCAAGAGC
AGCATTCTTGATAAAGTCGGAGACTTTATCACCGTAAACACGAAACGGCATGATGGGCGC
GAGGACTTCAACGAGCAAAACGACGAGCTGAACAGTCAAGAGAACCACAACAGCAGTGAG
AATGGGAACGAGAATGAAAATGAACAAGACAGTCTCGCGTTGGACGACCTAGACCGCGCC
TTTGAGCTGGTGGAAGGTATGGATATGGACTGGATGATGCCCTCGCATGCGCACCACTCC
CCAGCTACAACTGCTACAATCAAGCCGCGGCTATTATATTCGCCGCTAATACACACGCAA
AGTGCGGTTCCCGTAACCATTTCGCCGAACTTGGTCGCTACTGCTACTTCCACCACATCC
GCTAACAAAGTCACTAAAAACAAGAGTAATAGTAGTCCGTATTTGAACAAGCGCAGAGGT
AAACCCGGGCCGGATTCGGCCACTTCGCTGTTCGAATTGCCCGACAGCGTTATCCCAACT
CCGAAACCGAAACCGAAACCAAAGCAATATCCGAAAGTTATTCTGCCGTCGAACAGCACA
AGACGCGTATCACCGGTCACGGCCAAGACCAGCAGCAGCGCAGAAGGCGTGGTCGTAGCA
AGTGAGTCTCCTGTAATCGCGCCGCACGGATCGAGCCATTCGCGGTCGCTGAGTAAGCGA
CGGTCATCGGGCGCGCTCGTGGACGATGACAAGCGCGAATCACACAAGCATGCAGAGCAA
GCACGGCGTAATCGATTAGCGGTCGCGCTGCACGAACTGGCGTCTTTAATCCCCGCGGAG
TGGAAACAGCAAAATGTGTCGGCCGCGCCGTCCAAAGCGACCACCGTGGAGGCGGCCTGC
CGGTACATCCGTCACCTACAGCAGAACGTGAGCACGTGA
>CBF1 YJR060W SGDID:S000003821
ATGAACTCTCTGGCAAATAATAATAAGCTTTCTACTGAGGATGAGGAAATCCATTCGGCA
AGAAAAAGAGGCTATAACGAGGAGCAGAACTACAGCGAGGCCAGGAAAAAGCAAAGAGAT
CAAGGCTTGTTGTCACAAGAGAGCAATGACGGAAATATTGACTCTGCTCTGTTGAGCGAA
GGGGCTACGCTAAAAGGGACTCAAAGTCAGTATGAAAGCGGACTGACGTCTAACAAAGAT
GAGAAAGGAAGTGATGACGAAGATGCGTCAGTGGCTGAGGCTGCTGTTGCCGCTACCGTC
AATTATACAGACTTAATCCAGGGCCAGGAAGATAGTTCTGATGCCCACACATCTAATCAA
ACGAACGCGAATGGTGAGCACAAGGATTCCCTTAATGGGGAAAGAGCCATAACCCCATCA
AATGAAGGAGTCAAGCCAAACACCTCCCTGGAGGGAATGACGTCTTCACCAATGGAATCT
ACACAGCAATCTAAAAACGACATGCTCATACCATTGGCAGAACACGATCGTGGGCCAGAA
CACCAACAGGATGATGAAGACAATGATGACGCTGACATTGATCTCAAAAAGGATATAAGC
ATGCAGCCGGGTCGTCGTGGAAGAAAACCTACTACTTTGGCCACAACAGACGAGTGGAAA
AAGCAAAGAAAAGACTCCCATAAAGAAGTCGAAAGGCGTCGCCGCGAAAACATCAACACT
GCAATCAACGTTTTAAGCGACCTCCTGCCCGTGAGAGAATCAAGTAAGGCAGCAATATTG
GCGTGTGCCGCTGAATACATTCAAAAATTGAAAGAAACCGATGAAGCAAACATCGAAAAG
TGGACGTTACAAAAATTGCTTAGCGAGCAAAACGCATCGCAATTAGCCAGTGCAAATGAG
AAACTGCAGGAAGAACTGGGAAATGCTTACAAAGAAATCGAGTACATGAAACGCGTTTTA
AGGAAGGAGGGAATAGAATACGAGGATATGCACACTCACAAGAAACAAGAGAACGAAAGA
AAAAGCACTAGGAGCGATAATCCACATGAGGCTTGA
>HMS1 YOR032C SGDID:S000005558
ATGCCAAATTTTCAAAAACCTTTTTCTGGTTCTTCGGATGGCAATTCTGTAATGAACGAC
CTAGGTAATAAAGTCGCCATCAAGGTTTTTGATTGTAGAAGTGCTCAAGATGGCAGCGAA
GAGCAGAATGTAAATGTAACCACGAACCAAATGTATTTAATGTTTCAAAGTAACAATTAC
AACGTGCCGCCACCAAATTACAATACCGAGGATTTGGGTTCTCAAGGACCTCCGACGCAT
GCTTATTACGCTCCATTTCAGCATCCCATCCATCTTCAACCTCCCGTGCCTCCTGTATAT
AAGAACAACACATATTCTGCCACAGACCAGTATAGTGACTCCTCGTTTCCTAATACTTCA
GGCCACACTCCAGTAATTGATAGTAATTACTATAATGATGCTCTGGCTTCTATACCTACA
ACAACGACGGGTAGTACTACAATGACTACAGACAATGGCAATACTATTGACAGCGAAGAA
TACATTGATAACATGGAAGTCTTTAGTAGCGAGGAAAATGAAAACATTGATAATGTAAAG
CAAACCGATCTTAAATCTGAAAAGGACTCGAGTCTTCTTTCAGCAGCTTCAATCGTGAAA
AAGGAACAATTGTCTGGCTTTGAAAATTTTTTGCCTTTATCGAAGACAGAGTCTCCCTTA
GTTACTGCAGACGAGATTAAATCATCTTTGAATTTGGAGAATATTGACAATGCTGACAGT
ATGAGCTTCAAGTTAAAAACTTCACCTATACGGAAACATTTTCATGTTAAACCCAAAAGA
ATAACAAGGGTGAGGACAGGAAGGGTATCACACAATATAATTGAAAAGAAATACCGTTCC
AATATTAATGATAAAATTGAACAATTAAGGAGAACTGTCCCAACGCTACGAGTAGCGTAT
AAAAAATGTAACGATCTTCCCATTACATCTAGAGACCTAGCAGACTTAGATGGCCTAGAG
CCAGCAACAAAATTGAATAAGGCGTCCATTTTAACGAAATCTATTGAATATATTTGTCAT
TTAGAAAGAAAGTGCCTACAGCTAAGCTTGGCTAATCAACATTTATCAAATGACACACGG
GATTCTTTCGTCCATCTTACCGAGCCATCTCAACCGTTGAGTGACAACAGTAGTAGTGAA
CAAGTACAAAAGCAAACCAGAAGCTGCCAACGCCAACGGCAGCGGCAGCCACGACAACAA
CAACCATTGCATAACATTCAATATAATATTCCACATCAAAACGGCCTCATGAGCGGCACC
AACAATTCACATGATATGGATTTTAACAACGCAGGAGACTTTTAA
etc, etc,
```

As your lab gets bigger, you can imagine it will be preferable to automate this process. 

Since you're taking a bash scripting class, you decide to write a script that will allow a user to pick an organism, pick a gene family (or families) and then receive as output a series of fasta files, one for each transcription factor family. Each file will contain the sequence of each gene in that family (in the organism selected).




Write a script called generateFactorFastas.sh

This script should be executed in the following manner:

>**generateFactorFastas.sh -organism** *\<organism\>* **-families** *\<TFfamily1\>,[TFfamily2],[TFfamily3]*

For our first attempt at this assignment, we'll stick to the organism Saccharomyces cerevisiae, so the script will be executed:

>**generateFactorFastas.sh -organism yeast -families** *\<TFfamily1\>,[TFfamily2],[TFfamily3]*

The following parts of the command line will indicate the following things:
+ **generateFactorFastas.sh** the name of the script.
  + **-organism** a flag that is currently static but that later we will be able to alter to different organisms.
  + **-families** a flag that accepts a comma-separated list of different transcription factor families.

### Input:  
+ Scerevisiae_TFs.csv file
+ the *S. cerevisiae* genome
+ the *S. cerevisiae* gtf annotation file

### Output:
For each TF family that is supplied the script should output a fasta file entitled Scer_TFfamily1_CDS.fa that contains the coding sequence of each transcription factor DNA sequence like so:

```
$ more Scer_GATA_CDS.fa
>YAL1348C
ATGACTCTACAAGAATCTGATAAATTTGCTACCAAGGCCATTCATGCCGGTGAACATGTGGACGTTCACGGTTCCGTGATCGAACCCATTTCTTTGTCCACCACTTTCAAACAATCTTCTCCAGCTAACCCTATCGGTACTTACGAATACTCCAGATCTCAAAATCCTAACAGAGAGAACTTGGAAAGAGCAGTTGCCGCTTTAGAGAACGCTCAATACGGGTTGGCTTTCTCCTCTGGTTCTGCCACCACCGCCACAATCTTGCAATCGCTTCCTCAGGGCTCCCATGCGGTCTCTATCGGTGATGTGTACGGTGGTACCCACAGATACTTCACCAAAGTCGCCAACGCTCACGGTGTGGAAACCTCCTTCACTAACGATTTGTTGAACGATCTACCTCAATTGATAAAGGAAAACACCAAATTGGTCTGGATCGAAACCCCAACCAACCCAACTTTGAAGGTCACCGACATCCAAAAGGTGGCAGACCTTATCAAGAAGCACGCTGCCGGCCAAGACGTGATCTTGGTTGTCGACAACACCTTCTTGTCCCCATATATCTCCAATCCATTGAACTTCGGTGCAGACATCGTTGTCCACTCCGCTACAAAGTACATCAACGGTCACTCAGACGTTGTGCTCGGTGTCCTGGCCACTAATAACAAGCCATTGTACGAGCGTCTGCAGTTCTTACAAAACGCCATTGGTGCTATCCCATCTCCTTTCGATGCTTGGTTGACCCACAGAGGTTTGAAGACTTTGCATCTACGTGTCAGACAAGCTGCCCTCAGCGCCAACAAAATCGCTGAATTCTTGGCAGCAGACAAGGAAAACGTTGTCGCAGTCAACTACCCAGGTTTGAAGACACACCCTAACTACGACGTAGTGTTAAAGCAACACCGTGATGCCCTTGGTGGTGGTATGATCTCCTTCAGAATCAAGGGTGGTGCTGAAGCTGCTTCCAAGTTCGCCTCCTCCACAAGACTGTTCACATTGGCCGAATCCCTTGGTGGTATCGAATCTCTATTGGAAGTGCCCGCTGTGATGACCCACGGTGGTATCCCAAAGGAGGCCAGAGAGGCCTCTGGTGTTTTTGACGACTTGGTTAGAATCTCTGTCGGTATTGAAGACACTGACGATCTTTTGGAAGACATCAAGCAAGCCTTGAAACAAGCCACCAAC
>YCAJ348C
ATGATCGTAAATAACACACACGTGCTTACCCTACCACTTTATACCACCACCACATGCCATACTCACCCTCACTTGTATACTGATTTTACGTACGCACACGGATGCTACAGTATATACCATCTCAAACTTACCCTACTCTCAGATTCCACTTCACTCCATGGCCCATCTCTCACTGAATCAGTACCAAATGCACTCACATCATTATGCACGGCACTTGCCTCAGCGGTCTATACCCTGTGCCATTTACCCATAACGCCCATCATTATCCACATTTTGATATCTATATCTCATTCGGCGGTCCCAAATATTGTA
>YAL3843C
ATGCACGGCACTTGCCTCAGCGGTCTATACCCTGTGCCATTTACCCATAACGCCCATCATTATCCACATTTTGATATCTATATCTCATTCGGCGGTCCCAAATATTGTATAACTGCCCTTAATACATACGTTATACCACTTTTGCACCATATACTTACCACTCCATTTATATACACTTATGTCAATATTACAGAAAAATCCCCACAAAAATCACCTAAACATAAAAATATTCTACTTTTCAACAATAATACA
```

### First assignment
Try to write some pseudocode for this script. What are the basic steps this code will have to do? You don't need to know any particulars about the bash programming language to do this. Just write your pseudocode in plain english like so:

Step 1) Read in command line arguments   
Step 2) Set a variable for each transcription factor family given in the command line
etc, etc...

### Second assignment

Using your pseudocode, try to write code for one or two steps in your pseudocode. 
Write down what problems you encounter and what steps you expect the challenges to be.

### Next step

Try to put together a full working script. This can either contain all the commands you want to call. Alternatively, you can write a number of small scripts, one for each step. Then you can write a master script that calls each small script in turn.

### Extra credit

Learn about [CASE online](http://ryanstutorials.net/bash-scripting-tutorial/bash-if-statements.php). Try to use CASE to modify your scripts and allow for your script to be called in different orders.

>**generateFactorFastas.sh -organism** *\<organism\>* **-families** *\<TFfamily1\>,[TFfamily2],[TFfamily3]*

OR

>**generateFactorFastas.sh -families** *\<TFfamily1\>,[TFfamily2],[TFfamily3]* **-organism** *\<organism\>* 


